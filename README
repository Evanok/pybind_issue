tar -xf pybind_issue.tar.gz
cd pybind_issue
pip install cpp_python_export
python python_tests/test_compute_mat.py

On success:

$ python python_tests/test_compute_mat.py
init...
lets create with nb 56
compute_mat_create
nb is 56
 compute_mat_create DONE
create done..
create done..
b_r [0.41433097 0.66831597 0.59307638 0.56881402 0.0764003  0.83735405
 0.28562788 0.3778413  0.13744102 0.61958628 0.76159351 0.80743879
 0.4424638  0.27396484 0.28779641 0.30842884 0.5539611  0.74907382
 0.33363854 0.78076295 0.96360377 0.19438292 0.42514482 0.60336533
 0.81451114 0.23098889 0.09865365 0.33038219 0.74591106 0.14546349
 0.99155485 0.09554081 0.64082727 0.19444296 0.18877912 0.73601384
 0.82418161 0.14105962 0.20247655 0.29836577 0.03889447 0.3351314
 0.51182603 0.48428274 0.7498266  0.35183271 0.78155857 0.50610581
 0.7366103  0.79021955 0.94242655 0.03682165 0.19128084 0.59590798
 0.00926128 0.22771607]
prepare..
process..
input [0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0, 11.0, 12.0, 13.0, 14.0, 15.0, 16.0, 17.0, 18.0, 19.0, 20.0, 21.0, 22.0, 23.0, 24.0, 25.0, 26.0, 27.0, 28.0, 29.0, 30.0, 31.0, 32.0, 33.0, 34.0, 35.0, 36.0, 37.0, 38.0, 39.0, 40.0, 41.0, 42.0, 43.0, 44.0, 45.0, 46.0, 47.0, 48.0, 49.0, 50.0, 51.0, 52.0, 53.0, 54.0, 55.0]
input [0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0, 11.0, 12.0, 13.0, 14.0, 15.0, 16.0, 17.0, 18.0, 19.0, 20.0, 21.0, 22.0, 23.0, 24.0, 25.0, 26.0, 27.0, 28.0, 29.0, 30.0, 31.0, 32.0, 33.0, 34.0, 35.0, 36.0, 37.0, 38.0, 39.0, 40.0, 41.0, 42.0, 43.0, 44.0, 45.0, 46.0, 47.0, 48.0, 49.0, 50.0, 51.0, 52.0, 53.0, 54.0, 55.0]
Success. Max error: 3.1965690681090564e-06

Randon failed sometimes:

$ python python_tests/test_compute_mat.py
init...
lets create with nb 56
compute_mat_create
nb is 56
 pre malloc 0000000000000000...
malloc done 000002057EFD5830...
compute_mat_create DONE
create done..
create done..
b_r [0.52808717 0.10819105 0.62811054 0.14859413 0.28494803 0.325436
 0.51021497 0.4042933  0.45888179 0.59032539 0.20480368 0.13815638
 0.2377707  0.88474042 0.1165431  0.21482026 0.16796958 0.83195987
 0.08923202 0.08044483 0.36910645 0.80657102 0.84857415 0.26148497
 0.15242696 0.7865376  0.66954837 0.79868236 0.81778344 0.5328122
 0.64874077 0.58570538 0.91440252 0.52486181 0.68535731 0.61849365
 0.48089636 0.71931061 0.45992277 0.28898446 0.95118661 0.3937792
 0.26935325 0.60375072 0.3089062  0.90604099 0.92035632 0.0224813
 0.26174789 0.98905948 0.02883554 0.18643169 0.67292388 0.2186556
 0.50767528 0.45157397]
prepare..
process..
input [0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0, 11.0, 12.0, 13.0, 14.0, 15.0, 16.0, 17.0, 18.0, 19.0, 20.0, 21.0, 22.0, 23.0, 24.0, 25.0, 26.0, 27.0, 28.0, 29.0, 30.0, 31.0, 32.0, 33.0, 34.0, 35.0, 36.0, 37.0, 38.0, 39.0, 40.0, 41.0, 42.0, 43.0, 44.0, 45.0, 46.0, 47.0, 48.0, 49.0, 50.0, 51.0, 52.0, 53.0, 54.0, 55.0]
input [0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0, 11.0, 12.0, 13.0, 14.0, 15.0, 16.0, 17.0, 18.0, 19.0, 20.0, 21.0, 22.0, 23.0, 24.0, 25.0, 26.0, 27.0, 28.0, 29.0, 30.0, 31.0, 32.0, 33.0, 34.0, 35.0, 36.0, 37.0, 38.0, 39.0, 40.0, 41.0, 42.0, 43.0, 44.0, 45.0, 46.0, 47.0, 48.0, 49.0, 50.0, 51.0, 52.0, 53.0, 54.0, 55.0]
Failed. Total value:  56 , total error:  56


